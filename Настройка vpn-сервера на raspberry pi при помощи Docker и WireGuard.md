# Введение

Данный гайд не будет покрывать всю возможную теорию касаемо vpn, но в нем я постараюсь подробно описать все шаги, которые мне потребовалось совершить для того, чтобы с нуля на малинке поднять vpn сервер.

Исходные данные:
- Есть малинка (raspberry pi с установленной на ней paspbian os)
- Есть белый ip адрес и доменное имя на него

Требуется:
- Поднять vpn сервер, который будет обеспечивать подключение к информационным ресурсам через мой домашний интернет на территории других стран.
Основаная платформа, на которой будет применяться vpn - телефон на android.

Так как данная тема для меня чуждая (я очень мало в своей жизни админил, если вообще можно применить слово админ ко мне), а следовательно я обратился за помощью по этому вопросу к знающему человеку.
В итоге мы сошлись на двух open-source вариантах: использовании **OpenSSH** и **WireGuard**.

Первый вариант более мощный и лучше всего подходит для vpn сетей на большое количество пользователей, так как обладает хорошим инструментацием для ведения больших количеств конфигов пользователей.
Так же в **OpenSSH** довольно развитый инструментаций, который позволяет производить различные тонкие настройки.
Минусом всего этого лично для меня в использовании данного инструмента - это то, что он весьма прожорлив по питанию, если его запускать на мобильном телефоне.

Второй вариант - **WireGuard** такой проблемой не обладает (и хотя пока что сам я это не проверял, я доверяю мнению человека, который мне это сказал).
Так же в наличии есть довольно-таки удобное подключение через qr-код, что так же крайне сильно облегчает подключение к vpn через телефон.

В качестве основного софта было принято решение использовать **docker**, так как во первых он крайне упрощает развертывание уже ранее сконфигурированных систем и позволяет на новой машине запустить любое приложение всего в несколько команд (правда, конечно, за всем этим кроется целая глыба информации, и для того, чтобы в этом разобраться, нужно прочитать не одну, и даже не две книги).
Так же в использовании **docker** есть и другие преимущества.
К примеру то, что по сути работая с **yml** файлами ты сам себе документируешь все то, что созаешь, так как по сути в одном файле на особом языке будет описано все то, что требуется для настройки всего этого с нуля).

# Установка необходимого софта

Как уже говорилось ранее, для того, чтобы воспользоваться решением, изложенным в данном гайде, нужно будет установить docker и docker-compose.
Гайдов по установке данных программ в интернете много (и все они еще и различаются по методам установки), очень легко во всем этом заблудиться, поэтому я локализую гайд, которым пользовался сам, а так же приложу ссылку на него (в нем достаточно будет выполнить с первого по шестой пункт).

[How to install Docker and Docker-Compose on Raspberry Pi](https://dev.to/elalemanyo/how-to-install-docker-and-docker-compose-on-raspberry-pi-1mo)

## Обновление софта

Во всех гайдах, что я видел, с самого начала предлагают произвести обновление софта, который установлен на компьютере пользователя, видимо, для того, чтобы в дальнейшем не возникло возможных проблем с совместимостью на поздних шагах.
Лично я пользовался следующей командой:

```bash
sudo apt apdate
```

Но в том гайде, который приложен выше, изпользуется другая утилита

```bash
sudo apt-get update && sudo apt-get upgrade
```

Данная команда составная и по сути она сначала выполняет первую команду, а затем, при успешном выполнении первой команды, выполняет вторую команду.

## Установка Docker

**Docker** можно установить различными способами, один из самых простых - это скачать скрипт, который все сделает за тебя.
Сам скрипт в текстовой форме располагается по адресу *https://get.docker.com/* и для того, чтобы его запустить на свой машине, можно воспользоваться следующей командой:

```bash
curl -sSL https://get.docker.com | sh
```

В данной команде мы сначала получаем текст по ссылке, а затем передаем его на оболочку для выполнения.
Эту же команду можно выполнить и в два действия, для того, чтобы сохранить данный скрипт на машине для дальнейшего использования.

```bash
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
```

Первая команда создаст файл get-docker.sh в текущей директории, в котором будет содержание скрипта, а вторая команда запустит его в оболочке.
Особое внимание стоит уделить тому, что первая команда не сможет быть выполнена, если у пользователя нет прав на редактирование текущей директории.

## Установка Docker-Compose
